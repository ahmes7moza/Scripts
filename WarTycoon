local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- ESP and Aimbot settings
local ESP = {Enabled = false, ShowDistance = false, highlights = {}}
local AimbotFovEnabled = false
local FOVring, aimbotLoop
local fov = 150
local smoothing = 1
local sensitivity = 1
local aimPart = "Head"  -- Default aim part
local teamCheck = false

-- Initialize the Rayfield library and create the main window
local Window = Rayfield:CreateWindow({
    Name = "Legend Hub | Ware Tycoon",
    LoadingTitle = "Legend Hub",
    LoadingSubtitle = "by lg0_",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = nil,
        FileName = "Legend Hub"
    },
    Discord = {
        Enabled = false,
        Invite = "noinvitelink",
        RememberJoins = true
    },
    KeySystem = true,
    KeySettings = {
        Title = "War Tycoon | Key",
        Subtitle = "by lg0_",
        Note = "Yaba4a ana b7bk",
        FileName = "Key",
        SaveKey = true,
        GrabKeyFromSite = false,
        Key = {"123"}
    }
})

local MainTab = Window:CreateTab("Main")
local ESPTab = Window:CreateTab("ESP")
local AimbotTab = Window:CreateTab("Aimbot")

-- Walk Speed and Jump Power Sliders
MainTab:CreateSlider({
    Name = "Walk Speed",
    Range = {0, 200},
    Increment = 1,
    Suffix = "Speed",
    CurrentValue = 16,
    Flag = "Slider1",
    Callback = function(Value)
        game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = Value
    end,
})

MainTab:CreateSlider({
    Name = "Jump Power",
    Range = {0, 200},
    Increment = 1,
    Suffix = "Jump",
    CurrentValue = 50,
    Flag = "Slider2",
    Callback = function(Value)
        game.Players.LocalPlayer.Character.Humanoid.JumpPower = Value
    end,
})

-- NoClip Toggle
local NoClipEnabled = false
MainTab:CreateToggle({
    Name = "NoClip",
    CurrentValue = false,
    Flag = "Toggle3",
    Callback = function(Value)
        NoClipEnabled = Value
        if Value then
            game:GetService("RunService").Stepped:Connect(function()
                if NoClipEnabled then
                    for _, Part in ipairs(game.Players.LocalPlayer.Character:GetDescendants()) do
                        if Part:IsA("BasePart") then
                            Part.CanCollide = false
                        end
                    end
                end
            end)
        else
            for _, Part in ipairs(game.Players.LocalPlayer.Character:GetDescendants()) do
                if Part:IsA("BasePart") then
                    Part.CanCollide = true
                end
            end
        end
    end,
})

-- ESP Toggle and Highlight
local ESPEnabled = false
local ESPLabels = {}
local ESPColor = Color3.fromRGB(255, 255, 255)

local function CreateESPLabel(Player)
    local Label = Drawing.new("Text")
    Label.Text = Player.Name
    Label.Size = 20
    Label.Color = ESPColor
    Label.Visible = true
    Label.Center = true
    Label.Outline = false
    Label.Font = Drawing.Fonts.UI
    Label.StrokeWidth = 2
    Label.StrokeTransparency = 0.8
    return Label
end

local function UpdateESPLabel(Label, Player, ShowDistance)
    local Character = Player.Character
    if Character and Character:FindFirstChild("HumanoidRootPart") then
        local Head = Character:FindFirstChild("HumanoidRootPart")
        local ScreenPosition = workspace.CurrentCamera:WorldToViewportPoint(Head.Position)
        if ScreenPosition.Z >= 0 then
            if ShowDistance then
                local distance = (game.Players.LocalPlayer:DistanceFromCharacter(Head.Position))
                Label.Text = Player.Name .. " [" .. math.floor(distance) .. "m]"
            else
                Label.Text = Player.Name
            end
            Label.Position = Vector2.new(ScreenPosition.X, ScreenPosition.Y)
            Label.Visible = true
        else
            Label.Visible = false
        end
    else
        Label.Visible = false
    end
end

function ESP:start()
    ESP:stop()
    ESP.loop = game:GetService("RunService").Heartbeat:Connect(function()
        local ShowDistance = ESP.ShowDistance
        for _, Player in ipairs(game.Players:GetPlayers()) do
            if Player ~= game.Players.LocalPlayer then
                local Label = ESPLabels[Player]
                if not Label then
                    Label = CreateESPLabel(Player)
                    ESPLabels[Player] = Label
                end
                UpdateESPLabel(Label, Player, ShowDistance)
            end
        end
    end)
end

function ESP:stop()
    if ESP.loop then
        ESP.loop:Disconnect()
        ESP.loop = nil
    end
    for _, Label in pairs(ESPLabels) do
        Label:Remove()
    end
    ESPLabels = {}
end

ESPTab:CreateToggle({
    Name = "ESP",
    CurrentValue = false,
    Flag = "Toggle2",
    Callback = function(Value)
        ESPEnabled = Value
        if Value then
            ESP:start()
        else
            ESP:stop()
        end
    end,
})

ESPTab:CreateColorPicker({
    Name = "ESP Color",
    Color = ESPColor,
    Flag = "ColorPicker1",
    Callback = function(Value)
        ESPColor = Value
        for _, Label in pairs(ESPLabels) do
            Label.Color = Value
        end
    end,
})

local HighlightEnabled = false
local HighlightColor = Color3.fromRGB(255, 0, 0)

function ESP:highlightStart()
    ESP:highlightStop()
    ESP.highlightLoop = game:GetService("RunService").Heartbeat:Connect(function()
        for _, Player in ipairs(game.Players:GetPlayers()) do
            if Player ~= game.Players.LocalPlayer then
                local Character = Player.Character
                if Character and Character:FindFirstChild("HumanoidRootPart") and not ESP.highlights[Player] then
                    local Highlight = Instance.new("Highlight")
                    Highlight.Adornee = Character
                    Highlight.FillColor = HighlightColor
                    Highlight.OutlineColor = Color3.fromRGB(0, 0, 0)
                    Highlight.Parent = Character
                    ESP.highlights[Player] = Highlight
                end
            end
        end
    end)
end

function ESP:highlightStop()
    if ESP.highlightLoop then
        ESP.highlightLoop:Disconnect()
        ESP.highlightLoop = nil
    end
    for _, Highlight in pairs(ESP.highlights) do
        Highlight:Destroy()
    end
    ESP.highlights = {}
end

ESPTab:CreateToggle({
    Name = "Highlight",
    CurrentValue = false,
    Flag = "Toggle3",
    Callback = function(Value)
        HighlightEnabled = Value
        if Value then
            ESP:highlightStart()
        else
            ESP:highlightStop()
        end
    end,
})

ESPTab:CreateColorPicker({
    Name = "Highlight Color",
    Color = HighlightColor,
    Flag = "ColorPicker2",
    Callback = function(Value)
        HighlightColor = Value
        for _, Highlight in pairs(ESP.highlights) do
            Highlight.FillColor = Value
        end
    end,
})

-- Aimbot with FOV Implementation
local function initializeAimbotWithFOV()
    FOVring = Drawing.new("Circle")
    FOVring.Visible = true
    FOVring.Thickness = 1.5
    FOVring.Radius = fov
    FOVring.Transparency = 1
    FOVring.Color = Color3.fromRGB(255, 128, 128)
    FOVring.Position = workspace.CurrentCamera.ViewportSize / 2

    aimbotLoop = game:GetService("RunService").RenderStepped:Connect(function()
        local UserInputService = game:GetService("UserInputService")
        local pressed = UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton2)
        local cam = workspace.CurrentCamera
        local zz = workspace.CurrentCamera.ViewportSize / 2

        if AimbotFovEnabled and pressed then
            local curTar = getClosest(cam.CFrame)
            if curTar then
                local aimPos = curTar.Character[aimPart].Position
                local ssHeadPoint = cam:WorldToScreenPoint(aimPos)
                ssHeadPoint = Vector2.new(ssHeadPoint.X, ssHeadPoint.Y)
                if (ssHeadPoint - zz).Magnitude < fov then
                    local targetCFrame = CFrame.new(cam.CFrame.Position, aimPos)
                    workspace.CurrentCamera.CFrame = workspace.CurrentCamera.CFrame:Lerp(targetCFrame, smoothing * sensitivity)
                end
            end
        end

        if UserInputService:IsKeyDown(Enum.KeyCode.Delete) then
            aimbotLoop:Disconnect()
            FOVring:Remove()
        end
    end)
end

local function getClosest(cframe)
    local ray = Ray.new(cframe.Position, cframe.LookVector).Unit
    local target = nil
    local mag = math.huge

    for i, v in pairs(game.Players:GetPlayers()) do
        if v.Character and v.Character:FindFirstChild("Head") and v.Character:FindFirstChild("Humanoid") and v.Character:FindFirstChild("HumanoidRootPart") and v ~= game.Players.LocalPlayer and (v.Team ~= game.Players.LocalPlayer.Team or (not teamCheck)) then
            local aimPos = v.Character[aimPart].Position
            local magBuf = (aimPos - ray:ClosestPoint(aimPos)).Magnitude

            if magBuf < mag then
                mag = magBuf
                target = v
            end
        end
    end

    return target
end

local function initializeAimbotWithFOV()
    FOVring = Drawing.new("Circle")
    FOVring.Visible = true
    FOVring.Thickness = 1.5
    FOVring.Radius = fov
    FOVring.Transparency = 1
    FOVring.Color = Color3.fromRGB(255, 128, 128)
    FOVring.Position = workspace.CurrentCamera.ViewportSize / 2

    aimbotLoop = game:GetService("RunService").RenderStepped:Connect(function()
        local UserInputService = game:GetService("UserInputService")
        local pressed = UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton2)
        local cam = workspace.CurrentCamera
        local zz = workspace.CurrentCamera.ViewportSize / 2

        if AimbotFovEnabled and pressed then
            local curTar = getClosest(cam.CFrame)
            if curTar then
                local aimPos = curTar.Character[aimPart].Position
                local ssHeadPoint = cam:WorldToScreenPoint(aimPos)
                ssHeadPoint = Vector2.new(ssHeadPoint.X, ssHeadPoint.Y)
                if (ssHeadPoint - zz).Magnitude < fov then
                    local targetCFrame = CFrame.new(cam.CFrame.Position, aimPos)
                    workspace.CurrentCamera.CFrame = workspace.CurrentCamera.CFrame:Lerp(targetCFrame, smoothing * sensitivity)
                end
            end
        end

        if UserInputService:IsKeyDown(Enum.KeyCode.Delete) then
            aimbotLoop:Disconnect()
            FOVring:Remove()
        end
    end)
end

-- Aimbot Tab Controls
AimbotTab:CreateToggle({
    Name = "Aimbot with Fov",
    CurrentValue = false,
    Flag = "ToggleAimbotFov",
    Callback = function(Value)
        AimbotFovEnabled = Value
        if Value then
            initializeAimbotWithFOV()
        else
            if aimbotLoop then aimbotLoop:Disconnect() end
            if FOVring then FOVring:Remove() end
        end
    end,
})

AimbotTab:CreateSlider({
    Name = "FOV Circle Scale",
    Range = {0, 500},
    Increment = 1,
    Suffix = "",
    CurrentValue = fov,
    Flag = "SliderFOV",
    Callback = function(Value)
        fov = Value
        if FOVring then
            FOVring.Radius = fov
        end
    end,
})

AimbotTab:CreateSlider({
    Name = "Smoothing",
    Range = {0, 1},
    Increment = 0.1,
    Suffix = "",
    CurrentValue = smoothing,
    Flag = "SliderSmoothing",
    Callback = function(Value)
        smoothing = Value
    end,
})

AimbotTab:CreateSlider({
    Name = "Sensitivity",
    Range = {0, 3},
    Increment = 0.1,
    Suffix = "",
    CurrentValue = sensitivity,
    Flag = "SliderSensitivity",
    Callback = function(Value)
        sensitivity = Value
    end,
})

AimbotTab:CreateDropdown({
    Name = "Aim Part",
    Options = {"Head", "Torso"},
    CurrentOption = "Head",
    Flag = "DropdownAimPart",
    Callback = function(Value)
        aimPart = Value
    end,
})

local TeleportTab = Window:CreateTab("Teleport", nil) -- Title, Image
local TeleportSection = TeleportTab:CreateSection("Teleport")


local Button = TeleportTab:CreateButton({
   Name = "Bravo",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(-2739.52856, 34.6850014, -669.597229, 0.342042685, 0, 0.939684391, 0, 1, 0, -0.939684391, 0, 0.342042685)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Tango",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(-982.199219, 34.6850014, 2609.85498, -0.707134247, 0, -0.707079291, 0, 1, 0, 0.707079291, 0, -0.707134247)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Zulu",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(-2390.09644, 34.6850014, 1448.25854, -0.258864403, 0, 0.965913713, 0, 1, 0, -0.965913713, 0, -0.258864403)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Golf",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(2031.34814, 34.6850014, -1537.97949, 0.707134247, -0, -0.707079291, 0, 1, -0, 0.707079291, 0, 0.707134247)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Lima",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(3036.64819, 34.6850014, 762.649963, 0, 0, -1, 0, 1, 0, 1, 0, 0)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Lima",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(3036.64819, 34.6850014, 762.649963, 0, 0, -1, 0, 1, 0, 1, 0, 0)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Alpha",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(-2763.94824, 34.6850014, 412.049591, 0, 0, 1, 0, 1, -0, -1, 0, 0)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Omega",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(2892.73682, 34.6850014, 1660.63525, -0.258864403, 0, -0.965913713, 0, 1, 0, 0.965913713, 0, -0.258864403)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Charlie",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(-2363.6521, 34.6850014, -1508.4364, 0.499959469, 0, 0.866048813, 0, 1, 0, -0.866048813, 0, 0.499959469)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Delta",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(-1742.27612, 34.6850014, -2148.35376, 0.866007268, 0, 0.500031412, 0, 1, 0, -0.500031412, 0, 0.866007268)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Victor",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(-2385.74902, 34.6850014, 2411.34912, 0, 0, 1, 0, 1, -0, -1, 0, 0)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Hotel",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(2880.00732, 34.6850014, -1189.30591, 0.258864343, -0, -0.965913713, 0, 1, -0, 0.965913713, 0, 0.258864343)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Echo",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(-801.532959, 34.6850014, -2460.39551, 0.965929627, -0, -0.258804798, 0, 1, -0, 0.258804798, 0, 0.965929627)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Sierra",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(1262.71826, 34.6850014, 2755.2688, -0.906296611, 0, -0.422642082, 0, 1, 0, 0.422642082, 0, -0.906296611)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "FoxTrot",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(1147.84985, 34.6850014, -2140.04883, 1, 0, 0, 0, 1, 0, 0, 0, 1)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Romeo",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(2210.61133, 34.6850014, 2412.08325, -0.965929747, 0, -0.258804798, 0, 1, 0, 0.258804798, 0, -0.965929747)
   end,
})

local Button = TeleportTab:CreateButton({
   Name = "Kilo",
   Callback = function()
   local rootpart = game.Players.LocalPlayer.Character.HumanoidRootPart
   rootpart.CFrame = CFrame.new(3024.54883, 34.6850014, -318.749939, 0, 0, -1, 0, 1, 0, 1, 0, 0)
   end,
})


print("Script Loaded")
